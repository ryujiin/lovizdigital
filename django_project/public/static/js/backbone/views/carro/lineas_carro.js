define(["jquery","underscore","backbone","swig","../../collections/lineas","../../views/carro/lineas_linea"],function(i,e,t,n,a,s){"use strict";var o=t.View.extend({template:n.compile(i("#lineas_carro_tlp").html()),tagName:"div",id:"",className:"carro_lineas",events:{},initialize:function(){this.collection=new a,this.listenTo(this.model,"change",this.verificar_numero),this.render()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.verificar_numero()},buscar_lineas:function(){var e=this;this.collection.fetch({data:i.param({carro:this.model.id})}).done(function(){e.addLineas()})},verificar_numero:function(){0===this.model.toJSON().lineas?this.$el.hide():(this.$el.show(),this.buscar_lineas())},addLinea:function(i){if(0!==i.toJSON().cantidad){var e=this.collection.where({id:i.id});if(0!==e.length){var t=new s({model:i});this.$(".lineas_items").append(t.$el)}}},addLineas:function(){this.$(".lineas_items").empty(),this.collection.forEach(this.addLinea,this)}});return o});