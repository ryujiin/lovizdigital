define(["jquery","underscore","backbone","swig","../../app/header","../../../collections/pages","../../../models/page","paginas","../../pages/bloque","../../pages/carrusel_producto","productosTotal","../../../collections/productos"],function(e,t,a,s,i,o,n,l,r,d,c,h){"use strict";var u=a.View.extend({el:e("#contenido"),template:s.compile(e("#page_tema1_template").html()),id:"",className:"",model:new n,events:{},initialize:function(){this.listenTo(this.model,"change",this.rellenar),this.paginas=l},render:function(e){this.$el.html(this.template()),this.buscar_datos(e)},render_front:function(){this.$el.html(this.template()),this.model.toJSON().front===!0?this.rellenar():this.buscar_datos(),this.addTopSeller()},buscar_datos:function(e){if(e);else{var t=this.paginas.findWhere({front:!0});if(void 0===t){var a={front:!0};this.buscar_server(a)}else this.model.set(t.toJSON())}},buscar_server:function(t){var a=this,s=new o;s.fetch({data:e.param(t)}).done(function(e){a.paginas.add(e),a.buscar_datos()})},rellenar:function(){i.render(this.model.toJSON().titulo,this.model.toJSON().descripcion);var e=this.model.attributes.bloques;e.forEach(this.addBloque,this)},addBloque:function(e){new r({className:e.estilo,model:e})},addTopSeller:function(){var t=new h,a=new d({collection:t});this.$("#middle").append(a.$el),t.fetch({data:e.param({limite:10})}).done(function(){a.add_Carrusel()})}}),p=new u;return p});