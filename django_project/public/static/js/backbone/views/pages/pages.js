define(["jquery","underscore","backbone","swig","../../app/header","../../../collections/pages","../../../models/page","paginas","../../pages/bloque"],function(e,t,s,i,a,n,o,r,l){"use strict";var d=s.View.extend({el:e("#contenido"),template:i.compile(e("#page_tema1_template").html()),id:"",className:"",model:new o,events:{},initialize:function(){this.listenTo(this.model,"change",this.rellenar),this.paginas=r},render:function(e){this.$el.html(this.template()),this.buscar_datos(e)},render_front:function(){this.$el.html(this.template()),this.model.toJSON().front===!0?this.rellenar():this.buscar_datos()},buscar_datos:function(e){if(e);else{var t=this.paginas.findWhere({front:!0});if(void 0===t){var s={front:!0};this.buscar_server(s)}else this.model.set(t.toJSON())}},buscar_server:function(t){var s=this,i=new n;i.fetch({data:e.param(t)}).done(function(e){s.paginas.add(e),s.buscar_datos()})},rellenar:function(){a.render(this.model.toJSON().titulo,this.model.toJSON().descripcion);var e=this.model.attributes.bloques;e.forEach(this.addBloque,this)},addBloque:function(e){new l({className:e.estilo,model:e})}}),c=new d;return c});