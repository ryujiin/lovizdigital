define(["jquery","underscore","backbone","swig","carro","../../models/user","../../models/pedido","../../views/procesar/paso_metodoenvio","../../views/procesar/paso_identificar","../../collections/direcciones","../../views/procesar/paso_pago","../../views/procesar/resumen"],function(e,o,i,t,s,a,r,n,d,c,l,_){"use strict";var p=i.View.extend({el:e("#contenido"),template:t.compile(e("#procesar_page_tlp").html()),tagName:"div",id:"",className:"",events:{},initialize:function(){},render:function(){this.$el.html(this.template()),this.crear_paso_identificar(),this.crear_paso_envio(),this.crear_paso_pago(),this.crear_resumen(),this.ver_paso_actual()},verificar_render:function(){var e=this;s.toJSON().lineas?e.objtener_model():i.history.navigate("/",{trigger:!0})},objtener_model:function(){var e=this,o=s.toJSON().pedido;o?(this.model.id=o,this.model.fetch().done(function(){e.render()})):this.render()},crear_paso_identificar:function(){new d({el:this.$(".paso_identificar"),model:this.model})},crear_paso_envio:function(){{var e=new c;new n({el:this.$(".paso_envio"),collection:e,model:this.model})}},crear_paso_pago:function(){new l({el:this.$(".paso_pago"),model:this.model})},crear_resumen:function(){new _({el:this.$(".orden_sumary"),model:s})},ver_paso_actual:function(){void 0===this.model.id?this.model.set("paso_actual",1):"autenticado"===this.model.toJSON().estado_pedido?this.model.set("paso_actual",2):"metodo_envio"===this.model.toJSON().estado_pedido&&this.model.set("paso_actual",3)}}),m=new p({model:new r});return m});