define(["jquery","underscore","backbone","swig","carro","../../views/app/loader_full","../../views/productosingle/minicompra"],function(e,r,t,i,o,a,n){"use strict";var c=t.View.extend({template:i.compile(e("#add_to_cart_tlp").html()),tagName:"form",id:"",className:"addtocart",events:{},initialize:function(){this.render(),this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(this.template(this.model.toJSON()))},verificar_compra:function(r){var t=o,i=this,a=this.model.toJSON().carro;a?this.comprar(r):t.save().done(function(t){e.localStorage.set({carro:t.id}),i.model.set({carro:t.id}),i.comprar(r)})},comprar:function(e){{var r=this,t=new a;this.model}o.id&&(this.model.set({cantidad:1}),this.model.save().done(function(){r.crearMinicompra(),e.render(),t.remove(),o.fetch()}))},crearMinicompra:function(){var r=new n({model:this.model,el:e("#mini_compra")});r.mostrar()}});return c});