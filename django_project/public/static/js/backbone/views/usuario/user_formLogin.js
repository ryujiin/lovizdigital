define(["jquery","underscore","backbone","swig","../../models/user"],function(e,a,s,r,t){"use strict";var i=s.View.extend({template:r.compile(e("#user_formLogin_tlp").html()),id:"",className:"",events:{"blur input":"get_datos","submit form":"antes_enviar"},initialize:function(){this.render()},render:function(){this.$el.html(this.template())},get_datos:function(e){var a=e.target.value,s="."+e.target.dataset.contenedor,r=this.validar_vacio(a,s);r&&".campo_correo"===s&&this.validar_email(a,s)},validar_vacio:function(e,a){var s=this.$(a+" .error");return s.empty(),""===e?(this.$(a).addClass("has-error").removeClass("has-success"),s.append('<p class="text-danger">Este campo es Requerido *</p>'),!1):(this.$(a).addClass("has-success").removeClass("has-error"),!0)},validar_email:function(e,a){function s(e){return/(\w+)(\.?)(\w*)(\@{1})(\w+)(\.?)(\w*)(\.{1})(\w{2,3})/.test(e)?!0:!1}var r=this.$(a+" .error");return r.empty(),e=s(e),e===!1?(this.$(a).addClass("has-error").removeClass("has-success"),r.append('<p class="text-danger">Este no es un correo valido *</p>'),!1):(this.$(a).addClass("has-success").removeClass("has-error"),!0)},antes_enviar:function(e){e.preventDefault();var a,s,r;a=this.$(".campo_correo input"),s=this.$(".campo_pass input"),r=this.validar_email(a.val(),".campo_correo"),1==r&&(r=this.validar_vacio(s.val(),".campo_pass"),1==r&&t.ingresar_user(a.val(),s.val(),this))},error_login:function(){this.$(".error_form").empty();var a='<p class="bg-warning text-danger">El usuario o contrase√±a no coiciden, vuelva a intentarlo</p>';this.$(".error_form").append(a),this.$("input").each(function(){var a=e("."+this.dataset.contenedor);e(this).val(""),a.removeClass("has-success has-error")})}});return i});