function replaceDocument(t){var e=document.open("text/html");e.write(t),e.close()}function doAjaxSubmit(t){var e=$(this),a=$(this.clk),n=a.data("method")||e.data("method")||e.attr("method")||"GET";if(n=n.toUpperCase(),"GET"!==n){var o=e.find('input[data-override="content-type"]').val()||e.find('select[data-override="content-type"] option:selected').text();if("POST"!==n||o){t.preventDefault();var r,i=e.attr("action");if(o)r=e.find('[data-override="content"]').val()||"";else if(o=e.attr("enctype")||e.attr("encoding"),"multipart/form-data"===o){if(!window.FormData)return void alert("Your browser does not support AJAX multipart form submissions");o=!1,r=new FormData(e[0])}else o="application/x-www-form-urlencoded; charset=UTF-8",r=e.serialize();var c=$.ajax({url:i,method:n,data:r,contentType:o,processData:!1,headers:{Accept:"text/html; q=1.0, */*"}});return c.always(function(t,e,a){"success"!=e&&(a=t);var n=a.getResponseHeader("content-type")||"";if(0===n.toLowerCase().indexOf("text/html")){replaceDocument(a.responseText);try{history.replaceState({},"",i),scroll(0,0)}catch(o){window.location=i}}else window.location=i}),c}}}function captureSubmittingElement(t){var e=t.target,a=this;a.clk=e}$.fn.ajaxForm=function(){var t={};return this.unbind("submit.form-plugin  click.form-plugin").bind("submit.form-plugin",t,doAjaxSubmit).bind("click.form-plugin",t,captureSubmittingElement)};